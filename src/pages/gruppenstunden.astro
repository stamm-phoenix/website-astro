---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { getCollection } from 'astro:content';

// Get gruppenstunden data from content collection
const gruppenstunden = await getCollection('gruppenstunden');
// Sort by order field
const sortedGruppenstunden = gruppenstunden.sort((a, b) => (a.data.order || 0) - (b.data.order || 0));
---
<BaseLayout title="Gruppenstunden | Stamm Phoenix">
  <svelte:fragment slot="header"><Header /></svelte:fragment>

  <section class="prose">
    <h1>Gruppenstunden</h1>
    <p>Hier finden Sie eine Ãœbersicht unserer wÃ¶chentlichen Gruppenstunden.</p>
  </section>

  <section class="mt-6 grid gap-6 md:grid-cols-2">
    {sortedGruppenstunden.map((gruppe) => (
      <div class="rounded-[var(--radius-lg)] border border-[var(--color-neutral-200)] bg-white p-5 shadow-[var(--shadow-soft)]">
        <h2>{gruppe.data.name}</h2>
        <p><strong>Alter:</strong> {gruppe.data.age}</p>
        <p><strong>Gruppenstunde:</strong> {gruppe.data.day}, {gruppe.data.time}</p>
        {gruppe.data.description && (
          <p class="text-sm text-[var(--color-neutral-700)] mt-2">{gruppe.data.description}</p>
        )}
      </div>
    ))}
  </section>

  <p class="mt-4 text-sm text-[var(--color-neutral-700)]">Interesse an einer Schnupperstunde? <a href="/kontakt">Kontaktieren Sie uns</a>.</p>

  <svelte:fragment slot="footer"><Footer /></svelte:fragment>
</BaseLayout>