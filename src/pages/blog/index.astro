---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import PageHeader from "../../components/PageHeader.astro";
import BlogList from "../../components/BlogList.svelte";
import BlogPost from "../../components/BlogPost.svelte";
import TextLink from "../../components/TextLink.astro";

const postId = Astro.url.searchParams.get('post');
const isPostView = !!postId;
---

<BaseLayout
  title={isPostView ? "Blog | Stamm Phoenix" : "Blog | Stamm Phoenix"}
  description="Neuigkeiten, Berichte und Geschichten vom DPSG Stamm Phoenix Feldkirchen-Westerham."
>
  <Header slot="header" />

  {isPostView ? (
    <section class="prose" aria-labelledby="blog-back-link">
      <TextLink href="/blog" variant="back">&larr; Zur√ºck zum Blog</TextLink>
      <BlogPost client:only="svelte" postId={postId} />
    </section>
  ) : (
    <>
      <PageHeader
        title="Blog"
        description="Neuigkeiten und Berichte aus unserem Stammesleben."
      />

      <div class="mt-6">
        <BlogList client:only="svelte" />
      </div>
    </>
  )}

  <Footer slot="footer" />
</BaseLayout>
