---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import HeroSection from '../components/HeroSection.astro';
import QuickInfoCard from '../components/QuickInfoCard.astro';
import CTASection from '../components/CTASection.astro';
import Heading from '../components/Heading.astro';
import CardGrid from '../components/CardGrid.astro';
import homepageContent from '../data/homepage.json';

const { hero, quickInfo, callToAction } = homepageContent;
const sortedQuickInfo = [...quickInfo].sort((a, b) => a.order - b.order);
const quickInfoIconMap: Record<string, string> = {
  'FÃ¼r alle Altersstufen': 'ğŸŒ±',
  'DrauÃŸen erleben': 'â›º',
  'Werte leben': 'ğŸ¤',
};
---
<BaseLayout title="Willkommen | Stamm Phoenix" description="DPSG Stamm Phoenix Feldkirchen-Westerham â€“ Pfadfinden vor Ort.">
  <Header slot="header" />

  <!-- Skip to content -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 focus:bg-white focus:text-black focus:p-2 focus:rounded focus:shadow">
    Zum Inhalt springen
  </a>

  <!-- Hero -->
  <HeroSection
    badge="DPSG Feldkirchen-Westerham"
    title={hero.title}
    subtitle={hero.subtitle}
    description={hero.description}
    primaryButtonText={hero.primaryButtonText}
    primaryButtonLink={hero.primaryButtonLink}
    secondaryButtonText={hero.secondaryButtonText}
    secondaryButtonLink={hero.secondaryButtonLink}
  />

  <!-- Quick info -->
  <section class="mt-12 space-y-4" aria-labelledby="quick-info-heading">
    <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
      <Heading level={2} id="quick-info-heading" variant="section">Was uns ausmacht</Heading>
    </div>
    <CardGrid cols={3}>
      {sortedQuickInfo.map((info) => (
        <QuickInfoCard
          icon={quickInfoIconMap[info.title] ?? 'â­'}
          title={info.title}
          description={info.description}
        />
      ))}
    </CardGrid>
  </section>

  <!-- Mach mit! -->
  <CTASection
    label="Jetzt entdecken"
    title={callToAction.title}
    description={callToAction.description}
    buttonText={callToAction.buttonText}
    buttonLink={callToAction.buttonLink}
  />

  <Footer slot="footer" />
</BaseLayout>
